(this["webpackJsonptechdegree-project-11"]=this["webpackJsonptechdegree-project-11"]||[]).push([[0],{41:function(e,t,a){},59:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(1),c=a(13),s=a.n(c),i=a(9),o=(a(41),a(29)),l=a(30),u=a(35),h=a(34),g=a(2),d=a(31),j=a.n(d),b=(a(59),a(32)),f=a.n(b);a(73);var m=function(e){var t=e.HandleClick,a=e.links,r=e.setSafeSearch,c=e.safeSearch,s=e.setImagesPerPage,o=e.numberOfImagesPerPage;return Object(n.jsxs)("nav",{className:"main-nav",children:[Object(n.jsxs)("div",{className:"settings_container",children:[Object(n.jsxs)("div",{className:"settings_item",children:["Safe Search:\xa0",Object(n.jsxs)("select",{onChange:r,defaultValue:c,children:[Object(n.jsx)("option",{value:"1",children:"Safe"}),Object(n.jsx)("option",{value:"2",children:"Moderate"}),Object(n.jsx)("option",{value:"3",children:"Restricted"})]})]}),Object(n.jsxs)("div",{className:"settings_item",children:["Results per Page:\xa0",Object(n.jsxs)("select",{onChange:s,defaultValue:o,children:[Object(n.jsx)("option",{value:"20",children:"20"}),Object(n.jsx)("option",{value:"40",children:"40"}),Object(n.jsx)("option",{value:"80",children:"80"}),Object(n.jsx)("option",{value:"120",children:"120"})]})]})]}),Object(n.jsx)("ul",{children:a.map((function(e,a){return Object(n.jsx)("li",{onClick:t,children:Object(n.jsx)(i.b,{exact:!0,to:"/".concat(e.toLowerCase()),children:e})},a)}))})]})},v=a.p+"static/media/search.ca910276.svg";var O=function(e){var t=e.HandleSearch,a=e.searchQuery;return Object(n.jsxs)("form",{className:"search-form",onSubmit:t,children:[Object(n.jsx)("input",{id:"SearchQuery",type:"search",name:"search",placeholder:"Search",defaultValue:a,required:!0}),Object(n.jsx)("button",{type:"submit",className:"search-button",children:Object(n.jsx)("img",{src:v,alt:"SearchIcon"})})]})};var p=function(e){var t=e.url,a=e.title,r=e.index,c=e.HandleImageClick;return Object(n.jsx)("li",{children:Object(n.jsx)("img",{src:t,title:a,index:r,alt:a,onClick:c})})};var x=function(e){var t=e.title;return Object(n.jsxs)("div",{className:"not-found",children:[Object(n.jsx)("h3",{children:"No Results Found"}),Object(n.jsxs)("p",{children:["You search for ",Object(n.jsx)("strong",{children:t})," did not return any results. Please try again."]})]})};var P=function(e){var t=e.setPage,a=e.searchQuery,r=e.curentPage,c=e.text,s=e.value,o=e.className,l=e.disabled,u=e.hide;return Object(n.jsx)("li",{className:"change-page_button-container ".concat(u?"hide":null),children:l?Object(n.jsx)(i.b,{value:s,className:"change-page_button-button ".concat(o),to:"/".concat(a,"/").concat(r),children:c}):Object(n.jsx)(i.b,{onClick:t,value:s,className:"change-page_button-button ".concat(o),to:"/".concat(a,"/").concat(s),children:c})})};var S=function(e){var t=e.numberOfPages,a=e.curentPage,r=e.setPage,c=e.searchQuery;return Object(n.jsx)("nav",{"aria-label":"Page navigation",children:Object(n.jsxs)("ul",{className:"change-page_list",children:[Object(n.jsx)(P,{setPage:r,searchQuery:c,curentPage:a,text:"Previous",value:a-1,disabled:a<=1}),Object(n.jsx)(P,{setPage:r,searchQuery:c,curentPage:a,text:a-2,value:a-2,hide:t>a}),Object(n.jsx)(P,{setPage:r,searchQuery:c,curentPage:a,text:a-1,value:a-1,hide:a<=1}),Object(n.jsx)(P,{setPage:r,searchQuery:c,curentPage:a,text:a,value:a}),Object(n.jsx)(P,{setPage:r,searchQuery:c,curentPage:a,text:a+1,value:a+1,hide:a>=t}),Object(n.jsx)(P,{setPage:r,searchQuery:c,curentPage:a,text:a+2,value:a+2,hide:a>1}),Object(n.jsx)(P,{setPage:r,searchQuery:c,curentPage:a,text:"Next",value:a+1,disabled:t<=a})]})})};var y=function(e){var t=e.amountOfResults,a=e.buildFlikerUrl,r=e.curentPage,c=e.HandleImageClick,s=e.images,i=e.loading,o=e.numberOfPages,l=e.searchQuery,u=e.setPage,h=e.title;if(i)return Object(n.jsx)("p",{children:"loading..."});if(!(s.length>0))return Object(n.jsx)(x,{title:h});var g=s.map((function(e,t){return Object(n.jsx)(p,{url:a(e),title:e.title,index:t,HandleImageClick:c},e.id)}));return Object(n.jsxs)("div",{className:"photo-container",children:[Object(n.jsx)("h2",{children:h}),Object(n.jsxs)("small",{children:["Total Results: ",t]}),Object(n.jsx)("ul",{className:"photo-results",children:g}),Object(n.jsx)(S,{numberOfPages:o,curentPage:r,setPage:u,searchQuery:l})]})},k=a.p+"static/media/404.bbea2c44.jpg";var N=function(){return Object(n.jsx)("ul",{children:Object(n.jsxs)("li",{className:"not-found",children:[Object(n.jsx)("h1",{children:"404 someone took this page"}),Object(n.jsx)("img",{src:k,alt:"Error 404 Page Not Found"})]})})},w=!0,C=!1,I=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).HandleMainNavigationVisit=function(t){var a=t.target.textContent.toLowerCase();e.setLoading(a)},e.HandleImageClick=function(t){var a=t.target.getAttribute("index");e.setState({isOpen:!0,photoIndex:a})},e.setSafeSearch=function(t){var a=t.target.value;C=!0,e.setState({safeSearch:a})},e.setImagesPerPage=function(t){var a=t.target.value;console.log(a),C=!0,e.setState({numberOfImagesPerPage:a})},e.HandleSearch=function(t){t.preventDefault();var a=t.target.querySelector("#SearchQuery").value.toLowerCase();e.setLoading(a)&&e.props.history.push("/".concat(a))},e.preformSearch=function(t,a){var n=e.state,r=n.apiKey,c=n.safeSearch,s=n.numberOfImagesPerPage;if(t!==e.state.searchQuery&&w||C){w=!1,C=!1;var i="\n          https://api.flickr.com/services/rest/\n          ?method=flickr.photos.search\n          &api_key=".concat(r,"\n          &safe_search=").concat(c,"\n          &per_page=").concat(s,"\n          &format=json\n          &nojsoncallback=1\n          &tags=").concat(t,"\n          &page=").concat(a,"\n        ").replace(/\s+/g,"");j.a.get(i).then((function(a){e.setState((function(e,n){return{images:a.data.photos.photo,amountOfResults:a.data.photos.total,numberOfPages:a.data.photos.pages,loading:!1,searchQuery:t}})),w=!0})).catch((function(e){}))}},e.setLoading=function(t){return t!==e.state.searchQuery&&(e.setState({loading:!0}),!0)},e.setPage=function(t){C=!0;var a=Number(t.target.value);e.setState({curentPage:a})},e.state={apiKey:"abdf5b6303423d73193915048fd12ef9",navLinks:["Cats","Dogs","Computers","Coffee"],numberOfImagesPerPage:40,numberOfPages:0,curentPage:1,safeSearch:1,images:[],amountOfResults:"0",loading:!0,searchQuery:"",photoIndex:0,isOpen:!1},e}return Object(l.a)(a,[{key:"buildFlikerUrl",value:function(e){return"https://farm".concat(e.farm,".staticflickr.com/").concat(e.server,"/").concat(e.id,"_").concat(e.secret,".jpg")}},{key:"render",value:function(){var e=this,t=this.state,a=t.photoIndex,r=t.isOpen,c=t.images,s=t.amountOfResults,i=t.numberOfPages,o=t.searchQuery,l=t.navLinks,u=t.loading,h=t.numberOfImagesPerPage,d=t.safeSearch;return Object(n.jsxs)("div",{className:"container size-101vh",children:[Object(n.jsx)("h1",{children:"Flickr Search Engine"}),r&&Object(n.jsx)(f.a,{mainSrc:this.buildFlikerUrl(c[a]),nextSrc:this.buildFlikerUrl(c[(a+1)%c.length]),prevSrc:this.buildFlikerUrl(c[(a+c.length-1)%c.length]),imageTitle:c[a].title,imageCaption:c[a].title,onCloseRequest:function(){return e.setState({isOpen:!1})},onMovePrevRequest:function(){return e.setState({photoIndex:(a+c.length-1)%c.length})},onMoveNextRequest:function(){return e.setState({photoIndex:(a+1)%c.length})}}),Object(n.jsx)(O,{HandleSearch:this.HandleSearch,searchQuery:this.searchQuery}),Object(n.jsx)(m,{links:l,HandleClick:this.HandleMainNavigationVisit,setSafeSearch:this.setSafeSearch,safeSearch:d,setImagesPerPage:this.setImagesPerPage,numberOfImagesPerPage:h}),Object(n.jsxs)(g.d,{children:[Object(n.jsx)(g.a,{exact:!0,from:"/",to:"/cats"}),Object(n.jsx)(g.a,{exact:!0,from:"/:query",to:"/:query/1"}),Object(n.jsx)(g.b,{exact:!0,path:"/:query/:page?",render:function(t){var a=t.match;return e.preformSearch(a.params.query,a.params.page),Object(n.jsx)(y,{amountOfResults:s,buildFlikerUrl:e.buildFlikerUrl,curentPage:Number(a.params.page),HandleImageClick:e.HandleImageClick,images:c,loading:u,numberOfPages:i,searchQuery:o,setPage:e.setPage,title:o})}}),Object(n.jsx)(g.b,{component:N})]})]})}}]),a}(r.Component),Q=Object(g.g)(I),H=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function R(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(Object(n.jsx)(i.a,{basename:"/techdegree-project-11",children:Object(n.jsx)(Q,{})}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/techdegree-project-11",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/techdegree-project-11","/service-worker.js");H?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):R(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):R(e)}))}}()}},[[77,1,2]]]);
//# sourceMappingURL=main.2337a469.chunk.js.map