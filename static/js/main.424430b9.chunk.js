(this["webpackJsonptechdegree-project-11"]=this["webpackJsonptechdegree-project-11"]||[]).push([[0],{34:function(e,t,a){e.exports=a.p+"static/media/search.ede91782.svg"},35:function(e,t,a){e.exports=a.p+"static/media/404.9e8c8c00.jpg"},38:function(e,t,a){e.exports=a(78)},43:function(e,t,a){},61:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),l=a(7),s=(a(43),a(27)),i=a(28),u=a(36),m=a(29),g=a(37),h=a(8),f=a(30),d=a.n(f),v=(a(61),a(31)),p=a.n(v);a(74);var E=function(e){var t=e.HandleClick,a=e.links,n=e.setSafeSearch,c=e.safeSearch,o=e.setImagesPerPage,s=e.numberOfImagesPerPage;return r.a.createElement("nav",{className:"main-nav"},r.a.createElement("div",{className:"settings_container"},r.a.createElement("div",{className:"settings_item"},"Safe Search:\xa0",r.a.createElement("select",{onChange:n,defaultValue:c},r.a.createElement("option",{value:"1"},"Safe"),r.a.createElement("option",{value:"2"},"Moderate"),r.a.createElement("option",{value:"3"},"Restricted"))),r.a.createElement("div",{className:"settings_item"},"Results per Page:\xa0",r.a.createElement("select",{onChange:o,defaultValue:s},r.a.createElement("option",{value:"20"},"20"),r.a.createElement("option",{value:"40"},"40"),r.a.createElement("option",{value:"80"},"80"),r.a.createElement("option",{value:"120"},"120")))),r.a.createElement("ul",null,a.map((function(e,a){return r.a.createElement("li",{key:a,onClick:t},r.a.createElement(l.b,{exact:!0,to:"/".concat(e.toLowerCase())},e))}))))},P=a(34),b=a.n(P);var y=function(e){var t=e.HandleSearch,a=e.searchQuery;return r.a.createElement("form",{className:"search-form",onSubmit:t},r.a.createElement("input",{id:"SearchQuery",type:"search",name:"search",placeholder:"Search",defaultValue:a,required:!0}),r.a.createElement("button",{type:"submit",className:"search-button"},r.a.createElement("img",{src:b.a,alt:"SearchIcon"})))};var k=function(e){var t=e.url,a=e.title,n=e.index,c=e.HandleImageClick;return r.a.createElement("li",null,r.a.createElement("img",{src:t,title:a,index:n,alt:a,onClick:c}))};var S=function(e){var t=e.title;return r.a.createElement("div",{className:"not-found"},r.a.createElement("h3",null,"No Results Found"),r.a.createElement("p",null,"You search for ",r.a.createElement("strong",null,t)," did not return any results. Please try again."))};var x=function(e){var t=e.setPage,a=e.searchQuery,n=e.curentPage,c=e.text,o=e.value,s=e.className,i=e.disabled,u=e.hide;return r.a.createElement("li",{className:"change-page_button-container ".concat(u?"hide":null)},i?r.a.createElement(l.b,{value:o,className:"change-page_button-button ".concat(s),to:"/".concat(a,"/").concat(n)},c):r.a.createElement(l.b,{onClick:t,value:o,className:"change-page_button-button ".concat(s),to:"/".concat(a,"/").concat(o)},c))};var O=function(e){var t=e.numberOfPages,a=e.curentPage,n=e.setPage,c=e.searchQuery;return r.a.createElement("nav",{"aria-label":"Page navigation"},r.a.createElement("ul",{className:"change-page_list"},r.a.createElement(x,{setPage:n,searchQuery:c,curentPage:a,text:"Previous",value:a-1,disabled:a<=1}),r.a.createElement(x,{setPage:n,searchQuery:c,curentPage:a,text:a-2,value:a-2,hide:t>a}),r.a.createElement(x,{setPage:n,searchQuery:c,curentPage:a,text:a-1,value:a-1,hide:a<=1}),r.a.createElement(x,{setPage:n,searchQuery:c,curentPage:a,text:a,value:a}),r.a.createElement(x,{setPage:n,searchQuery:c,curentPage:a,text:a+1,value:a+1,hide:a>=t}),r.a.createElement(x,{setPage:n,searchQuery:c,curentPage:a,text:a+2,value:a+2,hide:a>1}),r.a.createElement(x,{setPage:n,searchQuery:c,curentPage:a,text:"Next",value:a+1,disabled:t<=a})))};var N=function(e){var t=e.amountOfResults,a=e.buildFlikerUrl,n=e.curentPage,c=e.HandleImageClick,o=e.images,l=e.loading,s=e.numberOfPages,i=e.searchQuery,u=e.setPage,m=e.title;if(l)return r.a.createElement("p",null,"loading...");if(!(o.length>0))return r.a.createElement(S,{title:m});var g=o.map((function(e,t){return r.a.createElement(k,{url:a(e),title:e.title,key:e.id,index:t,HandleImageClick:c})}));return r.a.createElement("div",{className:"photo-container"},r.a.createElement("h2",null,m),r.a.createElement("small",null,"Total Results: ",t),r.a.createElement("ul",{className:"photo-results"},g),r.a.createElement(O,{numberOfPages:s,curentPage:n,setPage:u,searchQuery:i}))},w=a(35),C=a.n(w);var I=function(){return r.a.createElement("ul",null,r.a.createElement("li",{className:"not-found"},r.a.createElement("h1",null,"404 someone took this page"),r.a.createElement("img",{src:C.a,alt:"Error 404 Page Not Found"})))},Q=!0,j=!1,H=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).HandleMainNavigationVisit=function(t){var a=t.target.textContent.toLowerCase();e.setLoading(a)},e.HandleImageClick=function(t){var a=t.target.getAttribute("index");e.setState({isOpen:!0,photoIndex:a})},e.setSafeSearch=function(t){var a=t.target.value;j=!0,e.setState({safeSearch:a})},e.setImagesPerPage=function(t){var a=t.target.value;console.log(a),j=!0,e.setState({numberOfImagesPerPage:a})},e.HandleSearch=function(t){t.preventDefault();var a=t.target.querySelector("#SearchQuery").value.toLowerCase();e.setLoading(a)&&e.props.history.push("/".concat(a))},e.preformSearch=function(t,a){var n=e.state,r=n.apiKey,c=n.safeSearch,o=n.numberOfImagesPerPage;if(t!==e.state.searchQuery&&Q||j){Q=!1,j=!1;var l="\n          https://api.flickr.com/services/rest/\n          ?method=flickr.photos.search\n          &api_key=".concat(r,"\n          &safe_search=").concat(c,"\n          &per_page=").concat(o,"\n          &format=json\n          &nojsoncallback=1\n          &tags=").concat(t,"\n          &page=").concat(a,"\n        ").replace(/\s+/g,"");d.a.get(l).then((function(a){e.setState((function(e,n){return{images:a.data.photos.photo,amountOfResults:a.data.photos.total,numberOfPages:a.data.photos.pages,loading:!1,searchQuery:t}})),Q=!0})).catch((function(e){}))}},e.setLoading=function(t){return t!==e.state.searchQuery&&(e.setState({loading:!0}),!0)},e.setPage=function(t){j=!0;var a=Number(t.target.value);e.setState({curentPage:a})},e.state={apiKey:"abdf5b6303423d73193915048fd12ef9",navLinks:["Cats","Dogs","Computers","Coffee"],numberOfImagesPerPage:40,numberOfPages:0,curentPage:1,safeSearch:1,images:[],amountOfResults:"0",loading:!0,searchQuery:"",photoIndex:0,isOpen:!1},e}return Object(g.a)(t,e),Object(i.a)(t,[{key:"buildFlikerUrl",value:function(e){return"https://farm".concat(e.farm,".staticflickr.com/").concat(e.server,"/").concat(e.id,"_").concat(e.secret,".jpg")}},{key:"render",value:function(){var e=this,t=this.state,a=t.photoIndex,n=t.isOpen,c=t.images,o=t.amountOfResults,l=t.numberOfPages,s=t.searchQuery,i=t.navLinks,u=t.loading,m=t.numberOfImagesPerPage,g=t.safeSearch;return r.a.createElement("div",{className:"container size-101vh"},r.a.createElement("h1",null,"Flickr Search Engine"),n&&r.a.createElement(p.a,{mainSrc:this.buildFlikerUrl(c[a]),nextSrc:this.buildFlikerUrl(c[(a+1)%c.length]),prevSrc:this.buildFlikerUrl(c[(a+c.length-1)%c.length]),imageTitle:c[a].title,imageCaption:c[a].title,onCloseRequest:function(){return e.setState({isOpen:!1})},onMovePrevRequest:function(){return e.setState({photoIndex:(a+c.length-1)%c.length})},onMoveNextRequest:function(){return e.setState({photoIndex:(a+1)%c.length})}}),r.a.createElement(y,{HandleSearch:this.HandleSearch,searchQuery:this.searchQuery}),r.a.createElement(E,{links:i,HandleClick:this.HandleMainNavigationVisit,setSafeSearch:this.setSafeSearch,safeSearch:g,setImagesPerPage:this.setImagesPerPage,numberOfImagesPerPage:m}),r.a.createElement(h.d,null,r.a.createElement(h.a,{exact:!0,from:"/",to:"/cats"}),r.a.createElement(h.a,{exact:!0,from:"/:query",to:"/:query/1"}),r.a.createElement(h.b,{exact:!0,path:"/:query/:page?",render:function(t){var a=t.match;return e.preformSearch(a.params.query,a.params.page),r.a.createElement(N,{amountOfResults:o,buildFlikerUrl:e.buildFlikerUrl,curentPage:Number(a.params.page),HandleImageClick:e.HandleImageClick,images:c,loading:u,numberOfPages:l,searchQuery:s,setPage:e.setPage,title:s})}}),r.a.createElement(h.b,{component:I})))}}]),t}(n.Component),R=Object(h.g)(H),_=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function F(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(l.a,{basename:"/techdegree-project-11"},r.a.createElement(R,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/techdegree-project-11",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/techdegree-project-11","/service-worker.js");_?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):F(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):F(e)}))}}()}},[[38,1,2]]]);
//# sourceMappingURL=main.424430b9.chunk.js.map